# Merge Strategy（マージ戦略）

## 最重要ルール

**main は受け取るだけ。変更は常に外で始める。**

```
main ← マージだけ。直接コミットしない
 └── feat/xxx ← 機能開発
 └── fix/xxx ← バグ修正
 └── docs/xxx ← ドキュメント
```

## 手順

1. **作業開始 → worktree を作成**: `git worktree add ../{repo}-{branch} -b feat/xxx`
2. **1 worktree = 1 ブランチ = 1 目的**（機能、修正、リファクタ）
3. 完了 → **Draft PR を作成**（マージは人間が判断）
4. レビュー後 → main にマージ + `git worktree remove` + ブランチ削除
5. main に直接コミットする例外は**ない**。typo でもブランチを切る

## Draft PR ルール

- エージェントは **Draft PR のみ** 作成する。Ready にしない
- PR 説明に「何をしたか」「なぜ」「テスト結果」を含める
- マージは**人間が判断**する。エージェントはマージしない

## マージ前チェック

- [ ] テスト/lint が通る
- [ ] コミット履歴が意味単位に分割されている
- [ ] 不要なデバッグコードが残っていない
